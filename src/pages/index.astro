---
---
<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>AstroLog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Estilos b√°sicos, adapta √† tua prefer√™ncia -->
  <style>
    body { font-family: sans-serif; background: #16161d; color: #eee; margin: 0; }
    nav { display: flex; gap: 6px; background: #222; padding: 0.5em; }
    nav button { background: #39396a; color: #fff; border: none; border-radius: 8px 8px 0 0; padding: 0.6em 1.2em; font-size: 1em; cursor: pointer; }
    nav button.active { background: #2e2e50; color: gold; font-weight: bold; }
    .tab { display: none; padding: 1.5em 1em; min-height: 50vh; }
    .tab.active { display: block; }
    footer { background: #222; color: #eee; display: flex; align-items: center; gap: 1em; justify-content: flex-end; padding: 0.8em 1em; }
    .observation-card { background: #232346; border-radius: 1em; margin: 1em 0; padding: 1em 1.3em; box-shadow: 0 1px 6px #0004; }
    .observation-card .title { font-weight: bold; font-size: 1.1em; }
    .observation-card img { margin: 0.6em 0; border-radius: 10px; }
    .modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #000a; display: flex; align-items: center; justify-content: center; z-index: 2000; }
    .modal-content { background: #101021; color: #fff; border-radius: 18px; padding: 2em 1.5em 1.5em; min-width: 270px; max-width: 96vw; box-shadow: 0 2px 24px #000b; position: relative; }
    .modal-content label { display: block; margin-top: 0.9em; }
    .modal-content input, .modal-content select, .modal-content textarea { margin-top: 0.3em; width: 100%; border-radius: 6px; border: 1px solid #39396a; background: #222241; color: #fff; padding: 0.5em; }
    .modal-content button { margin-top: 1em; background: #39396a; color: #fff; border: none; border-radius: 8px; padding: 0.6em 1.2em; cursor: pointer; }
    .modal-content button[type=button] { background: #333; }
    .dropdown-menu { background: #222241; position: absolute; border-radius: 8px; box-shadow: 0 1px 8px #0008; padding: 0.3em 0.5em; z-index: 9999; }
    .dropdown-menu > div { padding: 0.5em 1em; cursor: pointer; }
    .dropdown-menu > div:hover { background: #39396a; color: gold; }
    .highlight { background: #1b2a50 !important; color: gold !important; border-radius: 10px; }
    /* Calend√°rio */
    #calendarContainer { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; margin-top: 1em; }
    .calendar-day { text-align: center; padding: 0.8em 0; border-radius: 9px; background: #222241; cursor: pointer; min-width: 38px; min-height: 38px; }
    .calendar-day.highlight { background: #39396a; color: gold; }
    #calendarResults { margin-top: 1em; }
    /* Filtro vermelho */
    .red-filter { filter: brightness(0.85) sepia(1) hue-rotate(-30deg) saturate(8) brightness(0.7) contrast(1.2); }
    /* Mobile */
    @media (max-width: 700px) { .tab { padding: 1em 0.5em; } .modal-content { padding: 1em; } }
  </style>
</head>
<body>
  <!-- Navega√ß√£o principal -->
  <nav>
    <button data-tab="inicio" class="active">In√≠cio</button>
    <button data-tab="objectos">Objectos</button>
    <button data-tab="recursos">Recursos</button>
    <button data-tab="links">Links √öteis</button>
    <button data-tab="calendario">Calend√°rio</button>
    <button data-tab="configuracoes">Configura√ß√µes</button>
    <button id="toggleLanguage" style="margin-left:auto;">EN</button>
    <button id="toggleRedFilter" title="Filtro vermelho" style="margin-left:0.6em;">üî¥</button>
    <button id="addObservationBtn" title="Adicionar Observa√ß√£o" style="margin-left:0.6em;font-weight:bold;">Ôºã</button>
  </nav>

  <!-- Tabs / Sec√ß√µes -->
  <section id="tab-inicio" class="tab active">
    <h2 id="inicio-astroapi-title">Mapa do c√©u</h2>
    <div id="inicio-astroapi">
      <div>
        <span id="inicio-localidade">Lisboa, Portugal</span>
        <button id="btn-alterar-local">Alterar</button>
      </div>
      <div style="margin-top:0.8em;">
        <span id="inicio-date" style="display:inline;">2024-06-07</span>
        <input id="inicio-date-input" type="date" style="display:none;" />
        <button id="inicio-edit-date">Editar Data</button>
      </div>
      <!-- Autocomplete Localiza√ß√£o -->
      <div id="local-autocomplete-wrapper" style="display:none;margin-top:1em;">
        <input id="local-autocomplete" type="text" placeholder="Pesquisar localidade..." autocomplete="off"/>
        <div id="autocomplete-results" style="background:#232346;max-height:110px;overflow-y:auto;"></div>
      </div>
      <div id="astroapi-dados" style="margin-top:1.4em;"></div>
      <div id="astroapi-skymap" style="margin-top:1em;"></div>
      <div id="inicio-previsao" style="margin-top:1.4em;"></div>
      <h3 id="inicio-eventos-title">Eventos astron√≥micos</h3>
      <ul id="eventos-list"></ul>
      <h3 id="inicio-objetos-title">Objetos vis√≠veis</h3>
      <ul id="objetos-list"></ul>
    </div>
  </section>

  <section id="tab-objectos" class="tab">
    <h2 style="display:flex;align-items:center;gap:1em;">
      Objectos Observados
      <input type="text" id="searchInput" placeholder="Pesquisar observa√ß√µes..." style="margin-left:1em;flex:1;max-width:220px;">
      <button id="filterByType" style="margin-left:1em;">Filtrar por tipo</button>
    </h2>
    <div style="margin-bottom:1em;">
      <button data-filter="todos" class="active">Todos</button>
      <button data-filter="recentes">Recentes</button>
      <button data-filter="favoritos">Favoritos</button>
    </div>
    <div id="observationsList"></div>
  </section>

  <section id="tab-recursos" class="tab">
    <h2>Recursos</h2>
    <div>
      <ul>
        <li><a href="https://stellarium-web.org/" target="_blank">Stellarium Web</a></li>
        <li><a href="https://heavens-above.com/" target="_blank">Heavens Above</a></li>
        <li><a href="https://www.timeanddate.com/astronomy/" target="_blank">Time and Date</a></li>
        <li><a href="https://xeuxvrxx.manus.space/" target="_blank">Recursos Astro</a></li>
      </ul>
    </div>
  </section>

  <section id="tab-links" class="tab">
    <h2>Links √öteis</h2>
    <ul>
      <li><a href="https://www.nasa.gov/" target="_blank">NASA</a></li>
      <li><a href="https://www.esa.int/" target="_blank">ESA</a></li>
      <li><a href="https://www.spaceweather.com/" target="_blank">SpaceWeather.com</a></li>
    </ul>
  </section>

  <section id="tab-calendario" class="tab">
    <h2 id="calendarMonthYear">Calend√°rio</h2>
    <div style="display:flex;align-items:center;gap:1em;">
      <button id="prevMonth">&lt;</button>
      <span id="calendarMonthYearDisplay"></span>
      <button id="nextMonth">&gt;</button>
    </div>
    <div id="calendarContainer" style="margin-top:1em;"></div>
    <div id="calendarResults"></div>
  </section>

  <section id="tab-configuracoes" class="tab">
    <h2>Configura√ß√µes</h2>
    <p>Ajustes e configura√ß√µes da aplica√ß√£o.</p>
    <button id="exportJson">üì§ Exportar Observa√ß√µes</button>
    <label class="import-label">
      üì•
      <input type="file" id="importJson" style="display:none;">
      Importar Observa√ß√µes
    </label>
    <button id="downloadBackup">üíæ Descarregar Backup</button>
  </section>

  <!-- MODAL: Adicionar Observa√ß√£o -->
  <div id="addObservationModal" class="modal" style="display:none;">
    <div class="modal-content" style="background:#000;">
      <h2 id="addObsTitle">Adicionar Observa√ß√£o</h2>
      <form id="addObservationForm" autocomplete="off" enctype="multipart/form-data">
        <label id="labelNomeObj">Nome do objeto
          <input name="nome" required>
        </label>
        <label id="labelTipo">Tipo
          <select name="tipo" id="inputTipo" required>
            <option value="Estrela">Estrela</option>
            <option value="Gal√°xia">Gal√°xia</option>
            <option value="Aglomerado">Aglomerado</option>
            <option value="Nebulosa">Nebulosa</option>
            <option value="Sistema Solar">Sistema Solar</option>
            <option value="Outro">Outro</option>
          </select>
        </label>
        <label id="labelData">Data da observa√ß√£o
          <input name="data" type="date" required>
        </label>
        <label id="labelLocalizacao">Localiza√ß√£o
          <input name="local">
        </label>
        <label id="labelRA">RA
          <input name="ra">
        </label>
        <label id="labelDEC">DEC
          <input name="dec">
        </label>
        <label id="labelMagnitude">Magnitude
          <input name="magnitude" type="number" step="any">
        </label>
        <label id="labelDistancia">Dist√¢ncia
          <input name="distancia" type="number" step="any">
          <select name="unidadeDistancia" id="inputUnidadeDistancia">
            <option value="ly">ly</option>
            <option value="AU">AU</option>
          </select>
        </label>
        <label id="labelDescricao">Descri√ß√£o
          <textarea name="descricao" rows="2"></textarea>
        </label>
        <label id="labelFavorito">
          <input name="favorito" type="checkbox" value="1"> Favorito
        </label>
        <label id="labelImagem">Imagem
          <input name="imagem" type="file" accept="image/*">
        </label>
        <div style="margin-top:1em;display:flex;gap:0.6em;justify-content:flex-end;">
          <button id="btnSave" type="submit">Guardar</button>
          <button id="btnCancel" type="button">Cancelar</button>
          <button id="closeAddModal" type="button" style="background:#333;">Fechar</button>
        </div>
        <div id="addSuccessMsg" style="display:none;margin-top:1em;color:gold;font-weight:bold;">‚úîÔ∏è Observa√ß√£o adicionada com sucesso</div>
      </form>
    </div>
  </div>

  <!-- Footer com filtro vermelho -->
  <footer style="display:flex;">
    <label>
      <input type="checkbox" id="redFilterToggle"> Filtro Vermelho
    </label>
    <label>
      Intensidade:
      <input type="range" id="redFilterIntensity" min="20" max="100" value="60">
    </label>
  </footer>

  <!-- JS -->
 	 <script src="/app.js" is:inline></script>
	<script src="/Obs.js" is:inline></script>
</body>
</html>
